---
title: 클린 아키텍처 애매한 부분 정해드립니다.
date: 2022-11-24 17:18:00
categories: [Session, NHN FORWARD 2022]
tags: [til, backend]
---



## 소프트웨어 아키텍처 
소프트웨어가 제공하는 가치 중 하나인 "구조" 

## 좋은 아키텍처가 왜 중요한가요?
코딩(코드를 작성하는 행위) 
유지보수를 하기 위해서는 코드를 읽고 이해하고 수정할 수 있어야한다.
즉, 남이 쉽게 읽을 수 있어야 유지보수 비용을 줄일 수 있다.

#### 필요한 시스템을 만들고 유지보수 하는데 투입되는 입력을 최소화하는 것
구조가 좋으면 읽고 수정하기 쉬우며 수정하는 데 비용이 적게 든다.

곧 버려질 프로그램 == 지금 마켓봄 프로

아키텍처는 그만큼 중요하다.

----

### 좋은 아키텍처를 구성하는 방법
- 패러다임
- SOLID
- 컴포넌트 응짐성 원칙
- 컴포넌트 결합 원칙
--> 아키텍처 패턴 : 좋은 아키텍처를 잡기 위한 레시피

### 좋은 아키텍처를 시도하는 방법
1. 일단따라하기
2. 원칙을 학습하고 다시 따라하기
3. 각자의 프로젝트에 다시 적용
4. 여러 군데에 적용하기


### 어떤 아키텍처를 써야하나?
1. 계층형 아키텍처
	1. 웹 - 도메인 - 영속성
		1. 보편적, 처음에 익숙함 
		2. 업무 도메인에 대해 잘 말해주지 않고 복잡해지면 조직화에 도움이 되지않는다.
3. 클린 아키텍처
	1. 도메인이 중심 
	2. 의존성 역전
		1. 규칙이 단순 
		2. 도메인이 세부사항에 의지하지않는다. (DDD가능)
		3. 계층형보다 패키지구조가 복잡하고 익숙하진 않다.


---

#### 클린 아키텍처
: 좋은 아키텍처들의 장점을 하나로 뭉침 
관심사를 분리하고 , 의존성의 방향은 안쪽이고 고수준으로 향한다.

### 어떻게 공부하나요?
- 클린 아키텍처
	- 바이블이라 벅찰수도
	- 클린 아키텍처는 다이어그램 하나로 이루어있지 않다.
- 만들면서 배우는 클린 아키텍처 (톰 홈버그)
	- 헥사도날만 다룬다.

여기서, 핵시고날 이란?
잘 모르겠을떄는 헥사고날로 시작하는게 좋다.
클린 아키텍처의 기본 다이어그램과 가장 비슷함.
따라할 레퍼런스가 많음

---

아키텍처별 패키지/ 클래스 구조
- 계층형 아키텍처
- 기능 기반 패키기
- 둘을 합친게 헥사고날.
도메인으로 모인다.

### 왜 이렇게 클린아키텍처는 애매하냐?
- 규칙이 너무 단순하다. : 핵심규칙 2가지 외에는 다 케바케이다.
- 애매한 것을 어떻게 판단할 것인가?
	- 시스템을 만들고 유지보수하는데에 투입되는 인력 최소화에 유리한가?
	- 코드의존성이 안쪽으로, 고수준의 정책으로 향하고 있는가?
	- 세부사항이 변경되어도 도메인에는 변경이 없는가?
	- 테스트하기 쉬운가?
	- 각각의 아키텍처 원칙을 잘 지키고 있는가?

---

#### 이때는 쓰지마세요
소규모로 되어있을때(굳이?) + 다같이 사용하지 않기로 협의했을때 + 팀원들이 아키텍처에 대한 이해도가 낮을때
아키텍처는 전체 구조이기때문에 한 명만 알고 한다고 해서 도움이 되지않는다.

헥시고날을 하게 되면 패키지의 수가 많이 늘어난다. 하지만 많이 늘어나고 쪼갤수록 더 세세하게 분리할 수있기떄문에 좋은 구조를 갖기 위해서라는 필요조건이다.

#### 무조건 모든 구성원들이 아키텍처에 대해 이해하고 동의한 다음에 소스에 적용해야 합니다.

#### 원칙은 너무 많기때문에 알아서 잘, 적당히, 조심스럽게 적용해서 사용합시다.

다른 서비스를 부를떄는 직접 호출은 괜찮으나 양방향 호출은 안된다.
Service (interface) - ServiceImpl로 구현해야한다.
Service에 구현에 대해 Controller는 몰라도 된다.

---

결론: 
클린아키텍처는 .. 애매하다.........
아키텍처 무시하지 마세여 중요하니까요. 쒸익쒸익..



